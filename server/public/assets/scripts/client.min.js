/*! personal_project 2016-05-05 */
var app=angular.module("dashboardApp",["ngRoute"]);app.config(["$routeProvider","$locationProvider",function(a,b){a.when("/",{templateUrl:"/views/home.html",controller:"HomeController",controllerAs:"hc"}).when("/settings",{templateUrl:"/views/settings.html",controller:"SettingsController",controllerAs:"sc"}),b.html5Mode(!0)}]),app.controller("HomeController",["WeatherService","CalendarService","$http",function(a,b,c){console.log("home controller loaded");var d=this;d.time=moment().format("hh:mm A"),d.umbrellaURL="assets/images/attire/umbrella-light.png",d.shortsURL="assets/images/attire/shorts-light.png",d.pantsURL="assets/images/attire/pants-light.png",d.jacketURL="assets/images/attire/jacket-light.png",d.mittensURL="assets/images/attire/mitten-light.png",d.tshirtURL="assets/images/attire/tshirt-light.png",d.eventList=b.events,d.conditions=a.conditions,d.hourly=a.hourly,b.getCalendarEvents(),a.getWeather()}]),app.controller("SettingsController",["LocationService","TransitService",function(a,b){console.log("settings controller loaded");var c=this;c.selectedRoute={},c.selectedDirection="",c.routes=b.routes,c.cardinalDirections=b.cardinalDirections,c.stops=b.stops,c.logDirections=function(){console.log("sc.cardinalDirections:",c.cardinalDirections),console.log("sc.cardinalDirections.eastWest:",c.cardinalDirections.eastWest),console.log("sc.cardinalDirections.northSouth:",c.cardinalDirections.northSouth)},c.location={},c.setLocation=function(){a.setLocation(c.location.address,c.location.city,c.location.state,c.location.zip,c.location.weather,c.location.transit)},c.getRoutes=function(){b.getRoutes()},c.getDirection=function(){b.getDirection(c.selectedRoute)},c.getStops=function(){b.getStops(c.selectedRoute,c.selectedDirection)}}]),app.factory("TransitService",["$http",function(a){var b=[],c=!1,d=!1,e={},f=[],g=function(){a.get("/transit/routes").then(function(a){console.log("Got routes:",a),angular.copy(a.data,b)})},h=function(b){console.log("Getting directions for:",b),a.get("/transit/direction/"+b.Route).then(function(a){console.log("Got directions:",a.data);var b=a.data;"northSouth"===b?(c=!0,d=!1):(d=!0,c=!1),angular.copy({eastWest:d,northSouth:c},e),console.log("cardinalDirections",e)})},i=function(b,c){console.log("Getting stops for:",b,c),a.get("/transit/stops/"+b.Route+"/"+c).then(function(a){console.log("Got stops:",a.data),angular.copy(a.data,f)})};return{getRoutes:g,routes:b,getDirection:h,cardinalDirections:e,getStops:i,stops:f}}]),app.factory("CalendarService",["$http",function(a){var b=[],c=function(){a.get("/calendar").then(function(a){console.log("client side calendar response:",a);var c=[];a.data.map(function(a){var b=moment(a.start).format("HH:mm"),d=moment(a.end).format("HH:mm");c.push({title:a.title,start:b,end:d})}),angular.copy(c,b)})};return{events:b,getCalendarEvents:c}}]),app.factory("WeatherService",["$http",function(a){var b=[],c={},d=function(){a.get("/weather").then(function(a){console.log("client side weather response:",a),angular.copy(a.data.conditionObject,c),angular.copy(a.data.hourlyList,b)})};return{hourly:b,conditions:c,getWeather:d}}]),app.factory("LocationService",["$http",function(a){var b=0,c=function(c,d,e,f,g,h){var i={address:c,city:d,state:e,zip:f,weather:g,transit:h};a.post("/location",i).then(function(a){console.log("location posted successfully"),b=a.status})};return{setLocation:c,locationResponseStatus:b}}]);